"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11184],{11184:function(a,b,c){c.r(b),c.d(b,{default:function(){return w}});var d=c(89703),e=c(56890),f=c(9661),g=c(93156),h=c(98751),i=c(11460),j=c(60958),k=c(90950),l=c(51587),m=c(131),n=c(47186),o=c(39899),p=c(20018),q=c(43792),r=c(94848),s=c(73756);function t(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function u(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){t(a,b,c[b])})}return a}var v=function(a){return!!["/enterprise/demos/demo-1","/enterprise/demos/demo-2",].filter(function(b){return a.includes(b)}).length},w=function(){var a,b,c,t,w,x,y,z,A,B,C,D,E,F,G,H;return t=(a={googleAccountConfigs:{client_id:(0,k.ZP)()||(0,k.a8)()?m.iOS.DEVELOPMENT:m.iOS.PRODUCTION,cancel_on_tap_outside:!1,context:"signin"}}).googleAccountConfigs,A=(w="https://accounts.google.com/gsi/client",y=(x=(0,d.useState)(w?"loading":"idle"))[0],z=x[1],(0,d.useEffect)(function(){if(!w){z("idle");return}var a=document.querySelector('script[src="'.concat(w,'"]'));if(a)z(a.getAttribute("data-status")||"idle");else{(a=document.createElement("script")).src=w,a.async=!0,a.setAttribute("data-status","loading"),document.body.appendChild(a);var b=function(b){a&&a.setAttribute("data-status","load"===b.type?"ready":"error")};a.addEventListener("load",b),a.addEventListener("error",b)}var c=function(a){z("load"===a.type?"ready":"error")};return a.addEventListener("load",c),a.addEventListener("error",c),function(){a&&(a.removeEventListener("load",c),a.removeEventListener("error",c))}},[w]),y),B=(0,e.ix)(function(a){var b,c;return null===(b=a.user)|| void 0===b?void 0:null===(c=b.info)|| void 0===c?void 0:c.loggedOut}),C=(0,e.ix)(function(a){var b,c;return null===(b=a.user)|| void 0===b?void 0:null===(c=b.info)|| void 0===c?void 0:c.loaded}),D=(0,e.ix)(function(a){var b,c,d;return null===(b=a.user)|| void 0===b?void 0:null===(c=b.info)|| void 0===c?void 0:null===(d=c.data)|| void 0===d?void 0:d.user_id}),E=(0,j.useRouter)(),F=(0,e.ix)(function(a){return a.userConfig}),G=(0,e.TL)(),H=!v(E.pathname)&&((0,k.hN)()&&(0,l.gx)(null===(b=F.data)|| void 0===b?void 0:b.constants[m.zj2.ENABLE_SOCIAL_LOGIN_BETA])||(0,l.gx)(null===(c=F.data)|| void 0===c?void 0:c.constants[m.zj2.ENABLE_SOCIAL_LOGIN])),(0,d.useEffect)(function(){try{if(window.google&&"ready"===A){var a,b,c,d,e;null===(a=window.google)|| void 0===a||null===(b=a.accounts)|| void 0===b||null===(c=b.id)|| void 0===c||c.initialize((d=u({},t),e={callback:function(a){return function(a,b,c){c(s.n.close());var d,e=null==window?void 0:null===(d=window.location)|| void 0===d?void 0:d.pathname;if(!a.credential)throw Error("Couldn't get id token from Google");var j=(null==e?void 0:e.includes("/login/holiday_campaign"))?"/unlimited":(null==e?void 0:e.includes("/login"))||(null==e?void 0:e.includes("signup"))?"/":null!=e?e:"/";(0,f.Z)({url:"/api/google-otl/return",type:"POST",data:u({token:a.credential,referral_site:(0,p.Ar)(),last_referral_site:(0,p.rT)(),referral_code:(0,q.I)()},(0,r.We)(),(0,r.bB)())}).then(function(a){var c=JSON.parse(a);!0===c.login_successful?(document.documentElement.style.removeProperty("--loggedout-true"),document.documentElement.style.setProperty("--loggedout-false","none"),g.Z.dispatch(h.V.load()),g.Z.dispatch(i.s.load()),b.push(j),(0,o.qP)(c.operation===m.WHI.OPERATION.LOGIN?o.f2.LOGIN:o.f2.SIGNUP,c.operation===m.WHI.OPERATION.LOGIN?o.bt.LOGIN_SUCCEEDED:o.bt.SIGNUP_SUCCEEDED,"GOOGLE_OTL")):((0,o.qP)(c.operation===m.WHI.OPERATION.LOGIN?o.f2.LOGIN:o.f2.SIGNUP,c.operation===m.WHI.OPERATION.LOGIN?o.bt.LOGIN_FAILED:o.bt.SIGNUP_FAILED,"GOOGLE_OTL"),b.push("/login"))})}(a,E,G)}},e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(e)):(function(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);c.push.apply(c,d)}return c})(Object(e)).forEach(function(a){Object.defineProperty(d,a,Object.getOwnPropertyDescriptor(e,a))}),d))}}catch(j){(0,n.u)(j)}},[A]),(0,d.useEffect)(function(){try{var a,b,c,d,e,f,g;if(D&&(null==window||null===(a=window.google)|| void 0===a||null===(b=a.accounts)|| void 0===b||null===(c=b.id)|| void 0===c||null===(d=c.cancel)|| void 0===d||d.call(c)),!B&&!C||D&&C)return;"ready"===A&&H&&(null===(e=window.google)|| void 0===e||null===(f=e.accounts)|| void 0===f||null===(g=f.id)|| void 0===g||g.prompt())}catch(h){(0,n.u)(h)}},[A,C,D,B,H]),(0,d.useEffect)(function(){var a,b,c,d;v(E.pathname)&&(null==window||null===(a=window.google)|| void 0===a||null===(b=a.accounts)|| void 0===b||null===(c=b.id)|| void 0===c||null===(d=c.cancel)|| void 0===d||d.call(c))},[E]),null}}}])
//# sourceMappingURL=11184.7c604ee3cdd97528.js.map