"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[77237],{78524:function(a,b,c){var d=c(20348);c(89703);var e=c(90950),f=function(a){var b=a.defaultRedirect,c=a.isRedirectSet,f=a.isLifeTimeAlaCarte,g=a.hasMultipleRedirects,h=a.authorId,i=a.collectionId,j=a.navigateToTransition,k=a.deletionTime,l="".concat(f?"This course is no longer available on our catalog and will not be updated. You can still access the course.":"This course is no longer available on our catalog and won't be accessible after ".concat(k,".")," ").concat(c?"We have ".concat(g?"":"a ","better recommendation").concat(g?"s":""," for you."):"Weâ€™ll soon come up with a better alternative for you.");return(0,d.jsxs)("div",{className:"flex items-center text-center flex-col lg:flex-row",children:[(0,d.jsx)("span",{children:l}),c&&(0,d.jsx)("div",{className:"text-white active:text-white font-bold text-base hover:text-white border border-gray-500 border-solid rounded lg:ml-1 w-max mt-2 lg:mt-0 ml-0 lg:mb-0 mb-2",children:(0,d.jsx)("a",{className:"flex m-0 p-0 justify-center no-underline w-[150px] h-9 focus:text-white",href:j?"".concat((0,e.Dp)(),"/transition/").concat(h,"/").concat(i):b.redirect_url_slug?"".concat((0,e.Dp)(),"/courses/").concat(b.redirect_url_slug):"".concat((0,e.Dp)(),"/collection/").concat(b.author_id,"/").concat(b.collection_id),children:(0,d.jsx)("p",{className:"m-0 p-0 self-center",children:j?"View New Course".concat(g?"s":""):"Visit New Course"})})})]})};b.Z=f},52001:function(a,b,c){c.r(b),c.d(b,{ViewCollectionArticlesPage:function(){return ar},ViewCollectionArticlesPageForTest:function(){return at},default:function(){return as}});var d=c(41344),e=c.n(d),f=c(20348),g=c(89703),h=c(31285),i=c.n(h),j=c(25524),k=c(131),l=c(78471),m=c(8654),n=c(57020),o=c(19817),p=c(689),q=c(97725),r=c(39158);function s(){var a,b,c=(a=["\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  min-width: 1px;\n  margin-left: 0;\n  transition: margin-left 0.25s ease-out;\n  overflow: hidden;\n  position: relative;\n\n  .b-sticky-panel {\n    position: relative;\n  }\n\n  .b-footer {\n    position: relative;\n    flex: 0 0 auto;\n  }\n"],b||(b=a.slice(0)),Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(b)}})));return s=function(){return c},c}var t=r.ZP.div.withConfig({componentId:"sc-90bdb317-0"})(s()),u=function(a){var b=a.children;return(0,f.jsx)(t,{id:"view-collection-article-content-root",children:b})},v=c(72128),w=c(66226),x=c(99959),y=c(67506),z=c(50187),A=c(65279),B=c(31932),C=c(89508),D=c(60958),E=c(73756),F=c(4379),G=c(46757),H=c(39899),I=c(11619),J=c(50109),K=c(2604),L=c(82933),M=c(58910),N=c(18224),O=c(68401),P=c(97141),Q=c(63806),R=c(99051),S=c(35483),T=c(20018),U=c(94848),V=c(64762),W=c(16429),X=c(55563);function Y(a){if(void 0===a)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Z(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(j){c(j);return}h.done?b(i):Promise.resolve(i).then(d,e)}function $(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function _(a){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function aa(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){$(a,b,c[b])})}return a}function ab(a,b){return b=null!=b?b:{},Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):(function(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);c.push.apply(c,d)}return c})(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))}),a}function ac(a,b){return(ac=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}var ad=i()(function(){return Promise.all([c.e(9566),c.e(7684),c.e(55032),c.e(57238),c.e(59818),c.e(55587),c.e(99667),c.e(92657),c.e(26210),c.e(23406),c.e(64609),c.e(85358),c.e(92663),c.e(95372),c.e(60966),c.e(18165),c.e(39206),c.e(67141),c.e(76713),c.e(38899),c.e(16026)]).then(c.bind(c,59402))},{loadableGenerated:{webpack:function(){return[59402]}}}),ae=i()(function(){return Promise.all([c.e(9566),c.e(7684),c.e(57238),c.e(59818),c.e(55587),c.e(26210),c.e(23406),c.e(64609),c.e(85358),c.e(95372),c.e(18165),c.e(39206),c.e(76344),c.e(41326)]).then(c.bind(c,76344))},{loadableGenerated:{webpack:function(){return[76344]}}}),af=i()(function(){return Promise.all([c.e(9566),c.e(7684),c.e(63275),c.e(57238),c.e(88702),c.e(59818),c.e(55587),c.e(49284),c.e(50036),c.e(99667),c.e(43009),c.e(31847),c.e(26210),c.e(23406),c.e(64609),c.e(85358),c.e(8746),c.e(28302),c.e(92663),c.e(95372),c.e(18165),c.e(28892),c.e(64989),c.e(39206),c.e(76344),c.e(66221),c.e(62299)]).then(c.bind(c,46828))},{loadableGenerated:{webpack:function(){return[46828]}}}),ag=i()(function(){return Promise.all([c.e(9566),c.e(7684),c.e(63275),c.e(23656),c.e(87491),c.e(88702),c.e(59818),c.e(55587),c.e(49284),c.e(99667),c.e(88467),c.e(96443),c.e(60878),c.e(24715),c.e(26210),c.e(23406),c.e(64609),c.e(85358),c.e(8746),c.e(92663),c.e(60966),c.e(18165),c.e(78435),c.e(85231),c.e(32629),c.e(68604),c.e(66709),c.e(63286),c.e(12827),c.e(85867)]).then(c.bind(c,2752))},{loadableGenerated:{webpack:function(){return[2752]}}}),ah=i()(function(){return Promise.all([c.e(9566),c.e(7684),c.e(57238),c.e(59818),c.e(55587),c.e(99667),c.e(26210),c.e(23406),c.e(64609),c.e(85358),c.e(92663),c.e(18165),c.e(73195),c.e(77321)]).then(c.bind(c,91038))},{loadableGenerated:{webpack:function(){return[91038]}}}),ai=i()(function(){return Promise.all([c.e(73195),c.e(98651),c.e(98220),c.e(55930)]).then(c.bind(c,86813))},{loadableGenerated:{webpack:function(){return[86813]}}}),aj=i()(function(){return Promise.all([c.e(9566),c.e(7684),c.e(55032),c.e(57238),c.e(59818),c.e(55587),c.e(99667),c.e(92657),c.e(26210),c.e(23406),c.e(64609),c.e(85358),c.e(92663),c.e(95372),c.e(60966),c.e(18165),c.e(39206),c.e(67141),c.e(76713),c.e(38899),c.e(11238)]).then(c.bind(c,23309))},{loadableGenerated:{webpack:function(){return[23309]}}}),ak=i()(function(){return c.e(44157).then(c.bind(c,44157))},{loadableGenerated:{webpack:function(){return[44157]}},loading:function(){return(0,f.jsx)("div",{})}}),al=function(a){return[k.j1J.STANDALONE_ASSESSMENT,k.j1J.STANDALONE_PROJECT,].includes(a)},am=function(a,b,c){var d,e,f,g,h={next:null,previous:null},i=(null==a?void 0:null===(d=a.instance)|| void 0===d?void 0:d.details)||{},j=i.author_id,l=i.collection_id,m=(null===(e=i.toc)|| void 0===e?void 0:e.categories)||[],n=(0,z.qp)(j,l,m).flattenTree,o=n.findIndex(function(a){var c=a.id;return String(b)===c});if(o<0)return null;var p=o===n.length-1,q=i.page_titles,r=n[o+1],s=n[o-1],t=i.is_plan?k.dLO.PLAN:(0,I.Z)(c.asPath);return t===k.dLO.MODULE?(f=String(i.path_author_id),g=String(i.path_id)):(f=String(j),g=String(l)),r&&(h.next=aa(ab(aa({},n[o+1]),{title:q[Number(r.id)]}),(0,z.FW)(n[o+1].type)?{workType:k.dLO.MODULE}:{authorId:j,collectionId:l,workType:t})),s&&(h.previous=aa(ab(aa({},n[o-1]),{title:q[Number(s.id)]}),(0,z.FW)(n[o-1].type)?{workType:k.dLO.MODULE}:{authorId:j,collectionId:l,workType:t})),p&&t===k.dLO.MODULE&&(h.next={authorId:String(i.next_content_author_id),collectionId:String(i.next_content_collection_id),id:String(i.next_content_id),type:i.next_content_type,title:i.next_content_title,workType:(0,z.mz)(i.next_content_type)?k.dLO.PLAN:k.dLO.MODULE}),h.next&&(h.next=ab(aa({},h.next),{pathAuthorId:f,pathId:g})),h.previous&&(h.previous=ab(aa({},h.previous),{pathAuthorId:f,pathId:g})),h},an=function(a){for(var b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:[],c=arguments.length>2?arguments[2]:void 0,d=arguments.length>3?arguments[3]:void 0,e=d?a+1:a-1;e<b.length&&e>=0;){if(!b[e])return null;if(null===(f=b[e])|| void 0===f?void 0:f.is_preview){var f,g,h=null===(g=b[e])|| void 0===g?void 0:g.id;if(h)return{id:h,title:c[h],showPreviewLink:!0};return null}d?e++:e--}},ao=function(a,b){var c,d,e,f,g,h,i,j=a.author,k=j.collection,l=j.collectionArticle,m=j.articleSnapshot.properties,n=a.user,p=n.courseCompletion,q=n.userApiKeys,r=n.readerPreferences,s=n.widgetsData,t=n.info,u=a.loader,v=a.userCollectionArticle,w=a.collectionArticlePreview,x=a.widgets,y=a.paths,z=y.pathCompletion,A=y.moduleCategories,B=a.sidebar,C=B.toggle.sidebarCollapsed,D=b.router,E=(0,o.Z)(D.asPath)?l:v,F=null!==(i=null==k?void 0:null===(c=k.instance)|| void 0===c?void 0:null===(d=c.details)|| void 0===d?void 0:d.api_keys)&& void 0!==i?i:[],H=x.ids.map(function(a){return x.entities[a]}),I=G.parseUrl(D.asPath).url;return{collection:k,courseCompletion:p,userApiKeys:q,readerPreferences:r,widgetsData:s,apiKeys:F,loader:u,pageData:E,pageProps:!1===w.loading&& !0===w.loaded?w.data:{page_id:void 0,item_type:void 0,author_id:null==k?void 0:null===(e=k.instance)|| void 0===e?void 0:null===(f=e.details)|| void 0===f?void 0:f.author_id,collection_id:null==k?void 0:null===(g=k.instance)|| void 0===g?void 0:null===(h=g.details)|| void 0===h?void 0:h.collection_id},snapshotProperties:m.loaded?m.data:null,snapshotPropertiesLoading:!!m.loading,snapshotPropertiesLoaded:!!m.loaded,isVersions:(0,o.Z)(D.asPath),isPublished:null==k?void 0:k.is_published,comps:H,userInfo:null==t?void 0:t.data,userInfoLoaded:null==t?void 0:t.loaded,pageURL:I,isNonLessonPage:["/assessment","/project","/certificate","/cloudlab",].some(function(a){return I.endsWith(a)}),pathCompletion:z,moduleCategories:A,showSideBar:!C}},ap=function(a){return{setCollectionCompletion:function(b){var c=arguments.length>1&& void 0!==arguments[1]?arguments[1]:function(a){};return(0,n.NJ)(b,c)(a)},reset:function(b,c,d,e){var f=arguments.length>4&& void 0!==arguments[4]?arguments[4]:function(a){};return(0,n.fy)(b,c,d,e,f)(a)},dispatch:a}},aq=(0,j.$j)(ao,ap),ar=function(a){!function(a,b){if("function"!=typeof b&&null!==b)throw TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&ac(a,b)}(g,a);var b,c,d=(b=g,c=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}(),function(){var a,d,e,f,g=_(b);if(c){var h=_(this).constructor;f=Reflect.construct(g,arguments,h)}else f=g.apply(this,arguments);return d=this,(e=f)&&("object"==(a=e,a&&"undefined"!=typeof Symbol&&a.constructor===Symbol?"symbol":typeof a)||"function"==typeof e)?e:Y(d)});function g(){!function(a,b){if(!(a instanceof b))throw TypeError("Cannot call a class as a function")}(this,g),a=d.apply(this,arguments),a.state={cover_image:{},is_draft_page:!1,previousNextArticles:null,pageCompletionStatus:{completionLoaded:!1,completionLoading:!1,completionStatus:{},markAsCompleted:{},showCompletingLoader:!1},page_id:null,mobileViewToggle:!1,markAsCompleteLoading:!1,resetCourseCompletionLoading:!1,enterprisePreviousNextContent:null,purchasingFreeCollection:!1},a.renderArticle=!1,a.courseCompletionCallback=function(){var b,c,d,e,f,g=arguments.length>0&& void 0!==arguments[0]?arguments[0]:null,h=a.props,i=h.collection,j=h.pageProps,k=null==i?void 0:null===(b=i.instance)|| void 0===b?void 0:null===(c=b.details)|| void 0===c?void 0:c.collection_id,l=null==i?void 0:null===(d=i.instance)|| void 0===d?void 0:null===(e=d.details)|| void 0===e?void 0:e.author_id,m=a.getPlanInfo(),n=null!==(f=null==g?void 0:g["CourseCompletion_".concat(l,"_").concat(k)])&& void 0!==f?f:a.setFakeLessons();a.setState({pageCompletionStatus:{markAsCompleted:ab(aa({},a.state.pageCompletionStatus.markAsCompleted),$({},j.page_id,!((null==m?void 0:m.isPlanLesson)||(null==m?void 0:m.isPlanModule))||a.getPageCompletionStatus(n)===y.x)),completionStatus:ab(aa({},a.state.pageCompletionStatus.completionStatus),$({},j.page_id,a.getPageCompletionStatus(n))),completionLoaded:!0,completionLoading:!1,showCompletingLoader:!1}})},a.manageCompletion=function(b){var c=b.loaderValue,d=b.onlyLoader,e=void 0!==d&&d,f=b.onlyMarkAsCompleted,g=void 0!==f&&f,h=b.pageId;return!!h&&a.setState(function(a){var b,d=null===(b=a.pageCompletionStatus.markAsCompleted)|| void 0===b?void 0:b[h];return{pageCompletionStatus:aa(ab(aa({},a.pageCompletionStatus),{showCompletingLoader:c}),e?g?{markAsCompleted:ab(aa({},a.pageCompletionStatus.markAsCompleted),$({},h,!d))}:{}:{markAsCompleted:ab(aa({},a.pageCompletionStatus.markAsCompleted),$({},h,!d)),completionStatus:ab(aa({},a.pageCompletionStatus.completionStatus),$({},h,d?y.b:y.x))})}})},a.clearPageAction=function(){return a.props.isVersions?p.x.clear:q.m.clear},a.loggedInUser=function(){var b;return null===(b=a.props.userInfo)|| void 0===b?void 0:b.user_id},a.goBackToCollectionEditor=function(){var b=a.props.router.query.author_id,c=a.props.router.query.collection_id,d=a.props.router.query.page_id;a.props.isVersions?a.props.router.push("/pageeditor/".concat(b,"/").concat(c,"/").concat(d)):a.props.router.push("/collectioneditor/".concat(b,"/").concat(c))},a.getPageCompletionStatus=function(b){var c=a.props.pageProps.page_id;if(c){if(null==b?void 0:b.ALL_DONE)return y.x;var d=c.toString();if(({}).hasOwnProperty.call(b,d)){var e=b[d];if(e&&e.length>1&&!isNaN(Date.parse(e)))return y.x}}return y.b},a.setPageCompletionStatus=function(b,c){var d=a.props.pageProps,e=d.author_id,f=d.collection_id,g=d.page_id,h=d.work_type,i=a.props,j=i.collection,m=i.pathCompletion,o=i.router,p=i.userInfo,q=i.moduleCategories,r=i.isPath,s=h===k.dLO.COLLECTION,t=(null==j?void 0:null===(R=j.instance)|| void 0===R?void 0:R.owned_by_reader)||!(null==j?void 0:null===(S=j.instance)|| void 0===S?void 0:null===(T=S.details)|| void 0===T?void 0:T.is_priced),u=(null==p?void 0:p.user_id)===e,v=null==j?void 0:null===(U=j.instance)|| void 0===U?void 0:U.details,w=v.path_id,x=v.path_author_id||e,A="".concat(g),B=new Date().toString(),C=b===y.x?B:null,D=null==v?void 0:null===(V=v.toc)|| void 0===V?void 0:V.categories,E=(null===(W=a.props.courseCompletion)|| void 0===W?void 0:W["CourseCompletion_".concat(e,"_").concat(f)])||{},F=(0,l.Z)((0,z.ZP)(D),ab(aa({},E),($(ai={},A,C),$(ai,"ALL_DONE",b===y.b?null:E.ALL_DONE),ai))).percentCompleted,G=100===F,J=!!(null==p?void 0:null===(X=p.enterprise)|| void 0===X?void 0:null===(Y=X.organizations)|| void 0===Y?void 0:null===(Z=Y.find)|| void 0===Z?void 0:Z.call(Y,function(a){return a.has_active_trial})),K=($(aj={},A,C),$(aj,"resumable",t&&!u&&!G),aj);K.ALL_DONE=G?B:null;var L=(0,I.Z)(null==o?void 0:o.asPath),M={},N=!!(null==j?void 0:null===(_=j.instance)|| void 0===_?void 0:_.details.path_id)&&!!(null==j?void 0:null===(ac=j.instance)|| void 0===ac?void 0:ac.details.path_author_id)&&(null==j?void 0:null===(ad=j.instance)|| void 0===ad?void 0:ad.details.work_type)===k.dLO.COLLECTION;L===k.dLO.MODULE?(M={resumable_work_id:w,resumable_work_author_id:x,module_id:f,author_id:e},N&&(M=ab(aa({},M),{has_external_work:"true"})),G&&(0,H.qP)(H.f2.ENTERPRISE,H.bt.CLICKED_COMPLETED_MODULE,"",null,{trial_active:J,content_id:"".concat(e,"-").concat(f),is_assigned:!(null==j?void 0:null===(ak=j.instance)|| void 0===ak?void 0:null===(al=ak.details)|| void 0===al?void 0:al.is_assigned)})):M={resumable_work_id:f,resumable_work_author_id:e,author_id:e};var O={author_id:e,collection_id:f,payload:K,workType:N?k.dLO.MODULE:null==j?void 0:null===(ae=j.instance)|| void 0===ae?void 0:ae.details.work_type};a.props.dispatch((0,n.hy)(O,M,function(){return a.setState(function(a){return{pageCompletionStatus:ab(aa({},a.pageCompletionStatus),{completionStatus:ab(aa({},a.pageCompletionStatus.completionStatus),$({},c,b))})}},function(){return a.manageCompletion({onlyLoader:!0,onlyMarkAsCompleted:!0,loaderValue:!1,pageId:c})})},function(b){return a.updatePathCompletionMaps(b,A,r,m.loaded,m.loading,C)}));var Q=a.getPlanInfo();if((Q.isPlanModule||Q.isPlanLesson||r)&&Object.keys(null!==(am=q.data)&& void 0!==am?am:{}).length&&Object.keys(null!==(an=null===(af=m.data)|| void 0===af?void 0:af.maps)&& void 0!==an?an:{}).length){var R,S,T,U,V,W,X,Y,Z,_,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq=q.data,ar=(aq.planTitle,function(a,b){if(null==a)return{};var c,d,e=function a(b,c){if(null==b)return{};var d,e,f={},g=Object.keys(b);for(e=0;e<g.length;e++)d=g[e],c.indexOf(d)>=0||(f[d]=b[d]);return f}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],!(b.indexOf(c)>=0)&&Object.prototype.propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}(aq,["planTitle"])),as=ab(aa({},m.data.maps),$({},"CourseCompletion_".concat(e,"_").concat(f),ab(aa({},m.data.maps["CourseCompletion_".concat(e,"_").concat(f)]),$({},"".concat(g),b===y.b?null:new Date().toString()))));100===(0,P.sanitizePathCompletionMaps)(as,q.data,(0,P.getWorkToTotalLessonsMapping)(ar),null===(ao=q.data)|| void 0===ao?void 0:ao.optionalItems,null===(ap=q.data)|| void 0===ap?void 0:ap.optionalItemsCount).completionPercentage&&(0,H.qP)(H.f2.ONBOARDING,H.bt.PLAN_COMPLETED)}else!(Q.isPlanModule||Q.isPlanLesson)&&G&&L!==k.dLO.MODULE&&(0,H.qP)(H.f2.ENTERPRISE,s?H.bt.CLICKED_COMPLETED_COURSE:H.bt.CLICKED_COMPLETED_SKILL_PATH,"",null,{trial_active:J,content_id:"".concat(e,"-").concat(f),is_assigned:!!(null==j?void 0:null===(ag=j.instance)|| void 0===ag?void 0:null===(ah=ag.details)|| void 0===ah?void 0:ah.is_assigned)})},a.logWidgetInteraction=function(b){return function(c){return function(d){return function(e){var f,g,h,i,j,l=a.props,m=l.collection,o=l.pageProps,p=l.router,q=o.author_id,r=o.collection_id,s=o.page_id,t=o.external_author_id,u=o.external_collection_id,v=o.external_page_id,w=(0,I.Z)(p.asPath)===k.dLO.MODULE&&(null==m?void 0:null===(f=m.instance)|| void 0===f?void 0:f.details.work_type)===k.dLO.COLLECTION;if(!q)return setTimeout(function(){return a.logWidgetInteraction(b)(c)(d)(e)},3e3);var x={author_id:v?t:q,collection_id:v?u:r,page_id:s,is_draft_page:b,comp_id:c,comp_type:d,interaction_map:JSON.stringify(e),path_author_id:w?null==m?void 0:null===(g=m.instance)|| void 0===g?void 0:g.details.path_author_id:Number(null==m?void 0:null===(h=m.instance)|| void 0===h?void 0:h.details.author_id),path_id:w?null==m?void 0:null===(i=m.instance)|| void 0===i?void 0:i.details.path_id:Number(null==m?void 0:null===(j=m.instance)|| void 0===j?void 0:j.details.collection_id)};return a.props.dispatch((0,n.sn)(x))}}}},a.resetCollectionCompletionStatus=function(b,c){var d,e,f,g,h,i,j=a.props,l=j.collection,m=j.pageProps,n=j.pathCompletion,o=m.author_id,p=!!(null==l?void 0:null===(d=l.instance)|| void 0===d?void 0:d.details.path_id)&&!!(null==l?void 0:null===(e=l.instance)|| void 0===e?void 0:e.details.path_author_id)&&(null==l?void 0:null===(f=l.instance)|| void 0===f?void 0:f.details.work_type)===k.dLO.COLLECTION,q=(null==l?void 0:null===(g=l.instance)|| void 0===g?void 0:null===(h=g.details)|| void 0===h?void 0:h.is_plan)||(null==l?void 0:null===(i=l.instance)|| void 0===i?void 0:i.details.is_parent_plan);a.props.dispatch(E.n.show(w.zN,{onConfirm:function(){var d,e;a.setState({resetCourseCompletionLoading:!0}),a.props.reset(ab(aa({},m),{resumable_work_author_id:(null==l?void 0:null===(d=l.instance)|| void 0===d?void 0:d.details.path_author_id)||o,workType:p?k.dLO.MODULE:null==l?void 0:null===(e=l.instance)|| void 0===e?void 0:e.details.work_type}),b,c,p,function(b){a.setState(function(a){return{resetCourseCompletionLoading:!1,pageCompletionStatus:ab(aa({},a.pageCompletionStatus),{completionStatus:{}})}}),a.updatePathCompletionMaps(b,"ALL_DONE",q,n.loaded,n.loading,null)})()},cancelText:"Cancel",confirmText:"Reset",title:"Warning",description:"Resetting will set the course completion percentage to zero. This will not reset your saved changes e.g. code in the lessons."}))},a.updateOwnerShip=null;var a,b,c=Y(a);return a.purchaseFreeCollection=(b=e().mark(function a(){var b,d,f,g,h,i,j,k,l,n,o,p,q,r,s,t,u,v;return e().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(h=(g=c.props).collection,i=g.userInfo,j=g.router,k=g.dispatch,l=(null===(b=h.instance)|| void 0===b?void 0:b.details.price)===0||(null===(d=h.instance)|| void 0===d?void 0:d.details.discounted_price)===0,n=null===(f=h.instance)|| void 0===f?void 0:f.owned_by_reader,!(c.loggedInUser()&&l&&!n&&!c.state.purchasingFreeCollection)){a.next=17;break}if(o=null==i?void 0:i.is_user_subscribed){a.next=16;break}return r=null===(p=h.instance)|| void 0===p?void 0:p.details.author_id,s=null===(q=h.instance)|| void 0===q?void 0:q.details.collection_id,c.setState({purchasingFreeCollection:!0}),(0,H.qP)(H.f2.BUY,H.bt.BUY_INIT_COURSE_HOME),t=(0,U.We)(),u=(0,U.bB)(),v=aa({checkout_type:W.vl.COURSE_PURCHASE,author_id:r,work_id:s,expected_price:0,last_referral_site:(0,T.rT)(),referral_site:(0,T.Ar)(),is_zero_priced_course_buy:!0,work_type:"collection"},t,u),a.abrupt("return",k((0,V.eJ)(v)).then(function(){k((0,m.Ae)()),c.updateOwnerShip=function(){k((0,m.Ae)())}}).catch(function(a){var b;c.props.dispatch(E.n.show(w.ad,{status:"ERROR",text:null===(b=a.responseJSON)|| void 0===b?void 0:b.errorText})),c.setState({purchasingFreeCollection:!1}),j.push(j.query.course_url_slug?"/courses/".concat(j.query.course_url_slug):"/collection/".concat(j.query.author_id,"/").concat(j.query.collection_id))}));case 16:k((0,m.Ae)());case 17:case"end":return a.stop()}},a)}),function(){var a=this,c=arguments;return new Promise(function(d,e){var f=b.apply(a,c);function g(a){Z(f,d,e,g,h,"next",a)}function h(a){Z(f,d,e,g,h,"throw",a)}g(void 0)})}),a.setCollectionCompletionStatus=function(){var b,c,d,e,f,g,h,i,j,l,m=arguments.length>0&& void 0!==arguments[0]?arguments[0]:null,n=a.props,o=n.pathCompletion,p=n.setCollectionCompletion,q=n.userInfo,r=n.collection,s=a.props.pageProps,t=s.author_id,u=s.collection_id,v=!!(null==r?void 0:null===(b=r.instance)|| void 0===b?void 0:b.details.path_id)&&!!(null==r?void 0:null===(c=r.instance)|| void 0===c?void 0:c.details.path_author_id)&&(null==r?void 0:null===(d=r.instance)|| void 0===d?void 0:d.details.work_type)===k.dLO.COLLECTION,x={ALL_DONE:new Date().toString(),resumable:!1,resumable_work_id:null!=m?m:u,resumable_work_author_id:(null==r?void 0:null===(e=r.instance)|| void 0===e?void 0:e.details.path_author_id)||t,author_id:t};m&&(x=v?Object.assign({},x,{module_id:u,has_external_work:(!0).toString()}):Object.assign({},x,{module_id:u}));var y={author_id:t,collection_id:u,payload:x,workType:v?k.dLO.MODULE:null==r?void 0:null===(f=r.instance)|| void 0===f?void 0:f.details.work_type},z=null==r?void 0:null===(g=r.instance)|| void 0===g?void 0:g.owned_by_reader,A=null==r?void 0:null===(h=r.instance)|| void 0===h?void 0:h.details,B=!!q&&q.user_id===t,C=(null==r?void 0:null===(i=r.instance)|| void 0===i?void 0:null===(j=i.details)|| void 0===j?void 0:j.is_plan)||(null==r?void 0:null===(l=r.instance)|| void 0===l?void 0:l.details.is_parent_plan);(null==q?void 0:q.user_id)&&(A.is_priced&&z||!A.is_priced||B)&&a.props.dispatch(E.n.show(w.zN,{onConfirm:function(){a.setState({markAsCompleteLoading:!0}),p(y,function(b){a.setState({markAsCompleteLoading:!1}),a.updatePathCompletionMaps(b,"ALL_DONE",C,o.loaded,o.loading,new Date().toString())})()},cancelText:"Cancel",confirmText:"Complete",title:"Confirmation",description:"Are you sure you want to mark this course as 100% completed?"}))},a.setFakeLessons=function(){var b=a.props.collection;if(Object.keys(b).length){var c,d=null===(c=b.instance)|| void 0===c?void 0:c.details.page_titles;if(d)return Object.keys(d).reduce(function(a,b){return ab(aa({},a),$({},b,null))},{})}return{}},a.handleClaimCertificateLocal=function(){var b,c,d;return(0,K.Z)(null===(b=a.props.collection.instance)|| void 0===b?void 0:b.details.author_id,null===(c=a.props.collection.instance)|| void 0===c?void 0:c.details.collection_id,a.props.router,null===(d=a.props.collection.instance)|| void 0===d?void 0:d.details.work_type)},a.buyCertificateLocal=function(){return(0,K.l)(a.props.collection,a.props.router)},a.getPathShot=function(a,b){var c=!0,d=!1,e=void 0;try{for(var f,g=a[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value,i=!0,j=!1,l=void 0;try{for(var m,n=h.pages[Symbol.iterator]();!(i=(m=n.next()).done);i=!0){var o=m.value;if(b&&o.id.toString()===b&&o.type===k.RIu.SHOT)return o}}catch(p){j=!0,l=p}finally{try{i||null==n.return||n.return()}finally{if(j)throw l}}}}catch(q){d=!0,e=q}finally{try{c||null==g.return||g.return()}finally{if(d)throw e}}return null},a.getSelections=function(b,c,d,e,f,g,h){var i,j,k=a.props,l=k.dispatch,m=k.collection,n=k.router,o=n.query,p=null==m?void 0:m.is_guide,q=!o.encodedPathInfo&&!!(null==m?void 0:null===(i=m.instance)|| void 0===i?void 0:null===(j=i.details)|| void 0===j?void 0:j.is_standalone_module);l(E.n.show(w.dq,{result:b,categories:c,collectionId:d,authorId:e,url_slug:f,pathId:g,pathAuthorId:h,navigateToHighlight:Q.Gj,isStandaloneModule:q,collectionIsGuide:p})),(0,H.qP)(H.f2.COURSE,H.bt.VIEW_USER_HIGHLIGHTS,"OPEN")},a.onNotesClick=function(){var b,c,d,e,f,g=a.props,h=g.collection,i=g.router,j=h.collectionId,l=h.authorId,m=null==h?void 0:null===(b=h.instance)|| void 0===b?void 0:b.details.path_id,n=null==h?void 0:null===(c=h.instance)|| void 0===c?void 0:c.details.path_author_id,o=null==h?void 0:null===(d=h.instance)|| void 0===d?void 0:d.details.url_slug,p=(null===(f=null==h?void 0:null===(e=h.instance)|| void 0===e?void 0:e.details.toc)|| void 0===f?void 0:f.categories)||[],q=null==p?void 0:p.reduce(function(a,b){return a.concat(b.pages.reduce(function(a,b){return a.concat([k.RIu.LESSON,k.RIu.SHOT].includes(null==b?void 0:b.type)?[aa({},b.type===k.RIu.LESSON?{author_id:b.author_id,collection_id:b.collection_id,page_id:b.page_id}:{shot_id:b.page_id}),]:[])},[]))},[]);a.promise=(0,J.vu)(j,(0,I.Z)(null==i?void 0:i.asPath),{external_lessons_data:JSON.stringify(q)}).then(JSON.parse).then(function(b){return a.getSelections(b,p,j,l,o,m,n)})},a.handleSaveWidgetUserData=function(b,c){var d=c.compId,e=c.reset,f=arguments.length>2&& void 0!==arguments[2]?arguments[2]:null,g=a.props,h=g.userInfo,i=g.router,j=g.pageProps,k=g.collection,l=g.comps,m=g.dispatch;return(0,Q.uN)(b,d,e,null==h?void 0:h.user_id,i,j,k,l,m,f)},a.getPlanInfo=function(){var b,c,d,e;return{isPlanLesson:null===(b=a.props.collection||a.props.ssrContent)|| void 0===b?void 0:null===(c=b.instance)|| void 0===c?void 0:c.details.is_plan,isPlanModule:null===(d=a.props.collection||a.props.ssrContent)|| void 0===d?void 0:null===(e=d.instance)|| void 0===e?void 0:e.details.is_parent_plan}},a.updatePathCompletionMaps=function(b,c,d,e,f,g){return d&&!b&&e&&!f&&a.props.dispatch(R.J.updateMap({authorId:String(a.props.pageProps.author_id),collectionId:String(a.props.pageProps.collection_id),key:c,value:g}))},a}var h=g.prototype;return h.componentDidMount=function(){var a,b,c,d,e,f,g,h=this,i=this.props.router.query,j=this.props,l=j.isVersions,o=j.router,p=ab(aa({},i),{redirect_info:{collection_title:null===(a=this.props.meta)|| void 0===a?void 0:a.title,default_redirect:null===(b=this.props.meta)|| void 0===b?void 0:b.deleted_course_lesson_redirect,additional_course_alternatives:null===(c=this.props.meta)|| void 0===c?void 0:c.additional_course_alternatives,transition_page_title:null===(d=this.props.meta)|| void 0===d?void 0:d.transition_page_title,page_titles:null===(e=this.props.meta)|| void 0===e?void 0:e.page_titles,is_redirectable:null===(f=this.props.meta)|| void 0===f?void 0:f.is_redirectable},meta:this.props.meta,is_draft_page:this.state.is_draft_page||l});(null===(g=o.asPath)|| void 0===g?void 0:g.lastIndexOf("/preview"))!== -1&&o.replace(o.asPath.replace("/preview","")),!Object.keys(this.props.collection).length&&Object.keys(i).length?(this.props.dispatch((0,m._N)({params:p,router:o,disableAllRedirections:this.props.disableAllRedirections})).then(function(){var a,b,c,d,e=h.props,f=e.collection,g=e.pageProps;h.purchaseFreeCollection();var j=!!g.page_id||h.props.isNonLessonPage,l=null==f?void 0:null===(a=f.instance)|| void 0===a?void 0:a.details.collection_id,m=null==f?void 0:null===(b=f.instance)|| void 0===b?void 0:b.details.author_id,o=null==f?void 0:null===(c=f.instance)|| void 0===c?void 0:null===(d=c.details)|| void 0===d?void 0:d.collection_type;h.loggedInUser()&&Object.keys(f).length&&j&&o!==k.dLO.SKILL_ASSESSMENT&&!(h.state.pageCompletionStatus.completionLoaded||h.state.pageCompletionStatus.completionLoading)&&h.setState(function(a){return{pageCompletionStatus:ab(aa({},a.pageCompletionStatus),{completionLoading:!0})}},function(){return h.props.dispatch((0,n.Os)(ab(aa({},i),{author_id:m,collection_id:l,callback:h.courseCompletionCallback})))})}),this.renderArticle=!0):Object.keys(this.props.collection).length&&this.purchaseFreeCollection()},h.componentDidUpdate=function(a){var b,c,d,e,f,g,h,i,j,l,o,p,q,r,s,t,u,v,w,x=this,y=this.props,z=y.collection,A=y.userInfo,B=y.router,C=y.pageProps,D=y.loader,E=y.isPrivateContent,F=parseInt(B.query.author_id)||(null==z?void 0:null===(b=z.instance)|| void 0===b?void 0:null===(c=b.details)|| void 0===c?void 0:c.author_id);if((null===(d=a.collection.instance)|| void 0===d?void 0:d.owned_by_reader)!==(null===(e=z.instance)|| void 0===e?void 0:e.owned_by_reader)&&this.purchaseFreeCollection(),!this.updateOwnerShip||!D.isLoaded||D.isLoading||(null===(f=z.instance)|| void 0===f?void 0:f.owned_by_reader)||(this.updateOwnerShip(),this.updateOwnerShip=null),C.page_id!==a.pageProps.page_id&&C.page_id){var G=function(a,b,c,d,e,f){if(!Object.keys(a).length)return null;var g=null==a?void 0:a.instance,h=g.details||{},i=!(h.is_priced&&h.price&&h.discounted_price),j=h.toc||{},l=h.page_titles||[],m=j.categories||[],n=!!d&&d.user_id===c,o=!1,p=null;g.owned_by_reader||e||!h.is_priced||n||f||(o=!0,p={title:h.title,is_priced:h.is_priced,price:h.price,discounted_price:h.discounted_price,discounted_for_region:h.discounted_for_region||null});var q=m.reduce(function(a,b){return b.type===k.j1J.ASSESSMENT||b.type===k.j1J.PROJECT||b.type===k.j1J.CLOUD_LAB||b.type===k.j1J.EXTERNAL_ASSESSMENT||b.type===k.j1J.EXTERNAL_PROJECT?a.concat(b):a.concat(b.pages)},[]),r=q.findIndex(function(a){return a.id===b});if(r<0)return null;var s=void 0===q[r].is_lesson|| !0===q[r].is_lesson,t=null,u=null;g.owned_by_reader||i||(t=an(r,q,l,!0),u=an(r,q,l,!1));var v=null,w=null;return 0===r?(q.length>1&&(v={id:al(q[r+1].type)?q[r+1].page_id:q[r+1].id,title:l[q[r+1].id],type:q[r+1].type,showPreviewLink:!!o&&!q[r+1].is_preview,author_id:q[r+1].author_id,collection_id:q[r+1].collection_id}),{previous:null,next:t||v,collection_meta:p,is_current_page_lesson:s}):r===q.length-1?(w={id:al(q[r-1].type)?q[r-1].page_id:q[r-1].id,title:l[q[r-1].id],type:q[r-1].type,showPreviewLink:!!o&&!q[r-1].is_preview,author_id:q[r-1].author_id,collection_id:q[r-1].collection_id},{previous:u||w,next:null,type:q[r].type,collection_meta:p,is_current_page_lesson:s}):{previous:u||{id:al(q[r-1].type)?q[r-1].page_id:q[r-1].id,title:l[q[r-1].id],type:q[r-1].type,showPreviewLink:!!o&&!q[r-1].is_preview,author_id:q[r-1].author_id,collection_id:q[r-1].collection_id},next:t||{id:al(q[r+1].type)?q[r+1].page_id:q[r+1].id,title:l[q[r+1].id],type:q[r+1].type,showPreviewLink:!!o&&!q[r+1].is_preview,author_id:q[r+1].author_id,collection_id:q[r+1].collection_id},collection_meta:p,is_current_page_lesson:s}}(z,C.page_id,F,A,this.state.is_draft_page,this.props.isVersions);this.setState(aa({previousNextArticles:G},E?{enterprisePreviousNextContent:am(z,C.page_id,B)}:{}))}var H=this.props.router.query,I=null==z?void 0:null===(g=z.instance)|| void 0===g?void 0:null===(h=g.details)|| void 0===h?void 0:h.collection_id,J=null===(i=this.props.collection)|| void 0===i?void 0:null===(j=i.instance)|| void 0===j?void 0:null===(l=j.details)|| void 0===l?void 0:l.collection_type;this.loggedInUser()&&Object.keys(z).length&&((null===(o=a.userInfo)|| void 0===o?void 0:o.user_id)!==(null==A?void 0:A.user_id)||C.page_id!==a.pageProps.page_id)&&C.page_id&&J!==k.dLO.SKILL_ASSESSMENT&&!this.state.pageCompletionStatus.completionLoading&&this.setState(function(a){return{pageCompletionStatus:ab(aa({},a.pageCompletionStatus),{completionLoading:!0,completionLoaded:!1})}},function(){return x.props.dispatch((0,n.Os)(ab(aa({},H),{author_id:F,collection_id:I,callback:x.courseCompletionCallback})))});var K=ab(aa({},H),{redirect_info:{collection_title:null===(p=this.props.meta)|| void 0===p?void 0:p.title,default_redirect:null===(q=this.props.meta)|| void 0===q?void 0:q.deleted_course_lesson_redirect,page_titles:null===(r=this.props.meta)|| void 0===r?void 0:r.page_titles,additional_course_alternatives:null===(s=this.props.meta)|| void 0===s?void 0:s.additional_course_alternatives,transition_page_title:null===(t=this.props.meta)|| void 0===t?void 0:t.transition_page_title,is_redirectable:null===(u=this.props.meta)|| void 0===u?void 0:u.is_redirectable},meta:this.props.meta,is_draft_page:this.state.is_draft_page||this.props.isVersions}),M=null===(v=this.props.collection)|| void 0===v?void 0:null===(w=v.instance)|| void 0===w?void 0:w.details,N=H.courseUrlSlug?(null==M?void 0:M.url_slug)!==H.courseUrlSlug:(null==M?void 0:M.author_id)!==H.authorId||(null==M?void 0:M.collection_id)!==H.collectionId;Object.keys(a.collection).length>0&&0===Object.keys(this.props.collection).length&&Object.keys(H).length?(this.props.dispatch((0,m._N)({params:K,router:B,disableAllRedirections:this.props.disableAllRedirections})).then(function(){var a,b,c,d,e,f,g=x.props.collection,h=null==g?void 0:null===(a=g.instance)|| void 0===a?void 0:null===(b=a.details)|| void 0===b?void 0:b.collection_id,i=null==g?void 0:null===(c=g.instance)|| void 0===c?void 0:null===(d=c.details)|| void 0===d?void 0:d.author_id,j=null==g?void 0:null===(e=g.instance)|| void 0===e?void 0:null===(f=e.details)|| void 0===f?void 0:f.collection_type;x.loggedInUser()&&Object.keys(g).length&&x.props.isNonLessonPage&&j!==k.dLO.SKILL_ASSESSMENT&&!(x.state.pageCompletionStatus.completionLoaded||x.state.pageCompletionStatus.completionLoading)&&x.setState(function(a){return{pageCompletionStatus:ab(aa({},a.pageCompletionStatus),{completionLoading:!0})}},function(){return x.props.dispatch((0,n.Os)(ab(aa({},H),{author_id:i,collection_id:h,callback:x.courseCompletionCallback})))})}),this.renderArticle=!0):M&&N&&this.props.dispatch((0,m.l3)());var O=null==M?void 0:M.url_slug,P=!!(null==M?void 0:M.is_global)||H.encodedPathInfo&&!!(null==M?void 0:M.is_standalone_module),Q=String(null==M?void 0:M.path_author_id),R=String(null==M?void 0:M.path_id),S=!this.props.moduleCategories.loaded&&!this.props.moduleCategories.loading;Object.keys(this.props.collection).length>0&&S&&(String(I)===this.props.router.query.collection_id&&String(F)===this.props.router.query.author_id||O===this.props.router.query.course_url_slug)&&P&&H.encodedPathInfo&&this.props.dispatch(L.W.load(Q,R,!1,!1,null))},h.componentWillUnmount=function(){this.props.dispatch((0,m.l3)()),this.props.dispatch(F._.clear()),this.props.dispatch(M.R.hide(N.Z.DEPRECATED_CONTENT_BANNER))},h.getFetchPageAction=function(){return this.props.isVersions?p.x.load:q.m.load},h.render=function(){var a,b,c,d,e,g,h,i,j,m,n,p,q,r,s,t,w,y,B,D,E,F,G,H,J,K,L,M,N,P,R,T,U,V,W,Y,Z,$,_,ac,al,am,an,ao,ap=this,aq=this.props,ar=aq.isVersions,as=aq.isMobileAgent,at=aq.isNewOnboardingEditor,au=aq.isPrivateContent,av=this.props.pageProps,aw=av.author_id,ax=av.collection_id,ay=av.page_id,az=this.state,aA=az.markAsCompleteLoading,aB=az.enterprisePreviousNextContent,aC=az.previousNextArticles,aD=az.pageCompletionStatus,aE=az.resetCourseCompletionLoading,aF=this.props,aG=aF.collection,aH=aF.userInfo,aI=aF.userInfoLoaded,aJ=aF.dispatch,aK=aF.showSideBar,aL=aF.snapshotProperties,aM=aF.snapshotPropertiesLoading,aN=aF.snapshotPropertiesLoaded,aO=aF.pageURL,aP=aF.router,aQ=aP.query,aR=null==aG?void 0:null===(a=aG.instance)|| void 0===a?void 0:null===(b=a.details)|| void 0===b?void 0:b.CodeThemes,aS=aR?{Code:null==aG?void 0:null===(c=aG.instance)|| void 0===c?void 0:null===(d=c.details)|| void 0===d?void 0:null===(e=d.CodeThemes)|| void 0===e?void 0:e.Code,Markdown:null==aG?void 0:null===(g=aG.instance)|| void 0===g?void 0:null===(h=g.details)|| void 0===h?void 0:null===(i=h.CodeThemes)|| void 0===i?void 0:i.Markdown,RunJS:null==aG?void 0:null===(j=aG.instance)|| void 0===j?void 0:null===(m=j.details)|| void 0===m?void 0:null===(n=m.CodeThemes)|| void 0===n?void 0:n.RunJS,SPA:null==aG?void 0:null===(p=aG.instance)|| void 0===p?void 0:null===(q=p.details)|| void 0===q?void 0:null===(r=q.CodeThemes)|| void 0===r?void 0:r.SPA,isForced:null!==(W=null==aG?void 0:null===(s=aG.instance)|| void 0===s?void 0:null===(t=s.details)|| void 0===t?void 0:null===(w=t.CodeThemes)|| void 0===w?void 0:w.isForced)&& void 0!==W?W:x.Z}:{},aT=(null===(B=null==aG?void 0:null===(y=aG.instance)|| void 0===y?void 0:y.details.toc)|| void 0===B?void 0:B.categories)||[],aU=(0,z.ZP)(aT),aV=!aQ.encodedPathInfo&&!!(null==aG?void 0:null===(D=aG.instance)|| void 0===D?void 0:null===(E=D.details)|| void 0===E?void 0:E.is_standalone_module),aW=null==aG?void 0:null===(F=aG.instance)|| void 0===F?void 0:null===(G=F.details)|| void 0===G?void 0:G.collaboration_mode,aX="review"===aW,aY=(0,l.Z)(aU,null==aG?void 0:aG.course_completion).percentCompleted,aZ=this.getPlanInfo(),a$={userInfo:aH,userInfoLoaded:aI,canToggleSidebar:!0,fetchPageAction:this.getFetchPageAction(),clearPageAction:this.clearPageAction(),previousNextArticles:aC&&aa(ab(aa({},aC),{setCompletion:this.setPageCompletionStatus,manageCompletion:this.manageCompletion}),aD),enterprisePreviousNextContent:aB,default_themes:aS,collapsed:aK,pageTitle:null===(H=this.props.collection)|| void 0===H?void 0:null===(J=H.instance)|| void 0===J?void 0:null===(K=J.details)|| void 0===K?void 0:null===(L=K.page_titles)|| void 0===L?void 0:L[null==ay?void 0:ay.toString()],logWidgetInteraction:this.logWidgetInteraction,collectionSideBarVisible:aK,isInReviewerMode:aX,buyCertificate:this.buyCertificateLocal,handleClaimCertificate:this.handleClaimCertificateLocal,onNotesClick:this.onNotesClick,navigateToHighlight:function(a){(0,Q.Gj)(aQ,a),delete aQ.scrollParams},handleSaveWidgetUserData:this.handleSaveWidgetUserData,planInfo:aZ},a_=(aP.asPath.startsWith("/modules/page")||aP.asPath.startsWith("/module/page")||aP.asPath.startsWith("/plan/page"))&&aP.asPath.endsWith("/template");if(!Object.keys(aG).length||!this.renderArticle)return null;var a0={collapsed:aK,collection_id:ax,dispatch:aJ,page_id:ay},a1=null==aG?void 0:null===(M=aG.instance)|| void 0===M?void 0:null===(N=M.details)|| void 0===N?void 0:N.is_priced,a2=null==aG?void 0:null===(P=aG.instance)|| void 0===P?void 0:P.owned_by_reader,a3=!!aH&&aH.user_id===aw,a4=a$.pageTitle;aN?a4=(null==aL?void 0:aL.title)||"":aM&&(a4="");var a5=new C.Z,a6=null==aG?void 0:null===(R=aG.instance)|| void 0===R?void 0:null===(T=R.details)|| void 0===T?void 0:T.collection_type,a7=aT.some(function(a){return a.pages.some(function(a){return(aQ.page_id?a.id.toString()===aQ.page_id:a5.encode(a.id)===aQ.page_url_slug)&&a.is_preview})}),a8=(0,I.Z)(null==aP?void 0:aP.asPath),a9=a8===k.dLO.PATH&&aT.some(function(a){return[k.RIu.PATH_EXTERNAL_ASSESSMENT,k.RIu.PATH_EXTERNAL_PROJECT,].includes(a.type)}),ba=this.getPathShot(aT,aQ.page_url_slug&&!aO.endsWith("/certificate")?a5.decode(aQ.page_url_slug)[0].toString():aQ.page_id),bb={};return(ba&&(bb=ab(aa({},a$),{shotId:ba.page_id,shotUrl:ba.url,authorId:aw,collectionId:ax,pageId:aQ.page_id,workType:a8,isCollectionPriced:a1,isCollectionOwnedByReader:a2,isCollectionOwnedByAuthor:a3,percentCompleted:aY,readerPreferences:this.props.readerPreferences,widgetsData:this.props.widgetsData})),(null===(U=this.props)|| void 0===U?void 0:null===(V=U.meta)|| void 0===V?void 0:V.is_marked_for_deletion)&&Object.keys(aG).length&&(0,Q.NS)(null!=aG?aG:{},aY))?(0,f.jsx)(X.Z,{collectionTitle:null===(Y=this.props.meta)|| void 0===Y?void 0:Y.name,defaultRedirect:null===(Z=this.props.meta)|| void 0===Z?void 0:Z.deleted_course_lesson_redirect,transitionPageTitle:null===($=this.props.meta)|| void 0===$?void 0:$.transition_page_title,courseAlternatives:null===(_=this.props.meta)|| void 0===_?void 0:_.additional_course_alternatives,pageTitles:null==aG?void 0:null===(ac=aG.instance)|| void 0===ac?void 0:ac.details.page_titles,isRedirectable:null===(al=this.props.meta)|| void 0===al?void 0:al.is_redirectable}):((0,O.Wc)(this.props,!0),(0,f.jsxs)(f.Fragment,{children:[!a_&&!a9&&!as&&!aZ.isPlanLesson&&!aZ.isPlanModule&&!aP.query.menteeId&&!au&&!(0,S.VF)(a6)&&!at&&(0,f.jsx)(v.Z,{contentLoading:null===(am=this.props.pageData)|| void 0===am?void 0:am.loading,isInReviewerMode:aX,markAsCompleteLoading:aA,resetCourseCompletionLoading:aE,resetCollectionCompletionStatus:this.resetCollectionCompletionStatus,setCollectionCompletionStatus:this.setCollectionCompletionStatus,useModularTypescale:!0}),(0,f.jsxs)("div",{className:"ed-grid-main major-second lg:minor-third learner-mode",children:[(0,f.jsx)(u,ab(aa({},a0),{children:ba?(0,f.jsx)(aj,ab(aa({},this.props,bb),{mode:"view"})):aO.endsWith("/assessment")?(0,f.jsx)(af,ab(aa({},this.props,a$),{mode:"view",type:k.sLn.COLLECTION,isCollectionPriced:a1,isCollectionOwnedByReader:a2,isCollectionOwnedByAuthor:a3,percentCompleted:aY,useModularTypescale:!0})):aO.endsWith("/project")||this.props.isStandaloneProject?(0,f.jsx)(ag,ab(aa({},this.props,a$),{mode:"view",type:k.sLn.COLLECTION,isCollectionPriced:a1,isCollectionOwnedByReader:a2,isCollectionOwnedByAuthor:a3,percentCompleted:aY,useModularTypescale:!0})):aO.endsWith("/cloudlab")?(0,f.jsx)(ah,ab(aa({},this.props,a$),{mode:"view",type:k.sLn.COLLECTION,isCollectionPriced:a1,isCollectionOwnedByReader:a2,isCollectionOwnedByAuthor:a3,percentCompleted:aY})):aO.endsWith("/certificate")?(0,f.jsx)(ai,ab(aa({},this.props,a$),{percentCompleted:aY})):(0,o.Z)(aP.asPath)?(0,f.jsx)(ad,ab(aa({},this.props,a$),{pageTitle:a4,percentCompleted:aY,showVersionHistory:!0,isCollectionPriced:a1,isCollectionOwnedByReader:a2,isCollectionOwnedByAuthor:a3,isTemplateView:a_})):!a2&&!a7&&a1&&["/collection/page/[authorId]/[collectionId]/[pageId]","/courses/[courseUrlSlug]/[pageUrlSlug]","/path/page/[authorId]/[collectionId]/[pageId]","/path/lesson/[courseUrlSlug]/[pageUrlSlug]","/module/page/[encodedPathInfo]/[authorId]/[collectionId]/[pageId]","/module/lesson/[courseUrlSlug]/[pageUrlSlug]","/modules/page/[authorId]/[collectionId]/[pageId]","/plan/page/[authorId]/[collectionId]/[pageId]",].includes(aP.pathname)?(0,f.jsx)(ae,ab(aa({},this.props,a$),{isCollectionPriced:a1,isCollectionOwnedByReader:a2,isCollectionOwnedByAuthor:a3,purchasingFreeCollection:this.state.purchasingFreeCollection})):["/collection/page/[authorId]/[collectionId]/[pageId]","/courses/[courseUrlSlug]/[pageUrlSlug]","/path/page/[authorId]/[collectionId]/[pageId]","/path/lesson/[courseUrlSlug]/[pageUrlSlug]","/module/page/[encodedPathInfo]/[authorId]/[collectionId]/[pageId]","/module/lesson/[courseUrlSlug]/[pageUrlSlug]","/modules/page/[authorId]/[collectionId]/[pageId]","/plan/page/[authorId]/[collectionId]/[pageId]","/plan/[planAuthorId]/[planId]/preview","/module/standalone/[moduleAuthorId]/[moduleId]/draft",].includes(aP.pathname)&&(0,f.jsx)(ad,ab(aa({},this.props,a$),{mode:"view",percentCompleted:aY,isCollectionPriced:a1,isCollectionOwnedByReader:a2,isCollectionOwnedByAuthor:a3,isStandaloneModule:aV,useModularTypescale:!0,isTemplateView:a_}))})),ar&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(ak,{}),(0,f.jsx)(A.Z,{authorId:parseInt(aw,10),collectionId:parseInt(ax,10),pageId:parseInt(this.props.pageProps.page_id,10),documentType:k.qen.COLLECTION_LESSON,workType:null==aG?void 0:null===(an=aG.instance)|| void 0===an?void 0:null===(ao=an.details)|| void 0===ao?void 0:ao.work_type,wrappedComponentRef:function(a){return ap.versionHistorySidebar=a}})]})]})]}))},g}(g.Component);ar.defaultProps={disableAllRedirections:!1};var as=(0,B.Z)((0,D.withRouter)(aq(ar))),at=aq(ar)},31932:function(a,b,c){var d=c(20348),e=c(89703),f=c(10531),g=c(32084),h=c(57020);function i(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function j(a){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function k(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){i(a,b,c[b])})}return a}function l(a,b){return b=null!=b?b:{},Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):(function(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);c.push.apply(c,d)}return c})(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))}),a}function m(a,b){return(m=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}var n=function(a){return function(b){!function(a,b){if("function"!=typeof b&&null!==b)throw TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&m(a,b)}(o,b);var c,e,n=(c=o,e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}(),function(){var a,b,d,f,g=j(c);if(e){var h=j(this).constructor;f=Reflect.construct(g,arguments,h)}else f=g.apply(this,arguments);return b=this,(d=f)&&("object"==(a=d,a&&"undefined"!=typeof Symbol&&a.constructor===Symbol?"symbol":typeof a)||"function"==typeof d)?d:function(a){if(void 0===a)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(b)});function o(){var a;return!function(a,b){if(!(a instanceof b))throw TypeError("Cannot call a class as a function")}(this,o),a=n.apply(this,arguments),a.startTime=null,a.endTime=null,a.idleTime=0,a.allowTimeAddition=!1,a.intervalCounter=0,a.pageVisible=!0,a.intervalVariable=null,a.idleTimerRef=null,a.widgetTimes={},a.initializeAll=function(){a.startTime=null,a.endTime=null,a.idleTime=0,a.allowTimeAddition=!1,a.intervalCounter=0,a.pageVisible=!0,a.intervalVariable=null,a.widgetTimes={}},a.updateIdleTime=function(){a.allowTimeAddition&&a.idleTimerRef&&(a.idleTime+=Math.round(new Date().getTime()-a.idleTimerRef.getLastActiveTime()-a.idleTimerRef.props.timeout),a.allowTimeAddition=!1)},a.intervalCounterCB=function(){a.intervalCounter++},a.widgetIntervalCounterCB=function(b){return function(){return!!a.widgetTimes[b]&&a.widgetTimes[b].timeCounter++}},a.onActive=function(b){a.pageVisible&&(a.updateIdleTime(),a.initializeAllIntervals())},a.onIdle=function(b){a.allowTimeAddition=!0,a.clearAllIntervals()},a.initializeAllIntervals=function(){null===a.intervalVariable&&(a.intervalVariable=setInterval(a.intervalCounterCB,1e3)),Object.keys(a.widgetTimes).forEach(function(b){!a.widgetTimes[b].intervalVariable&&a.widgetTimes[b].inView&&(a.widgetTimes[b].intervalVariable=setInterval(a.widgetIntervalCounterCB(b),1e3))})},a.clearAllIntervals=function(){clearInterval(a.intervalVariable),a.intervalVariable=null,Object.keys(a.widgetTimes).forEach(function(b){clearInterval(a.widgetTimes[b].intervalVariable),a.widgetTimes[b].intervalVariable=null})},a.logPageTime=function(b,c,d,e,f){var g=arguments.length>5&& void 0!==arguments[5]?arguments[5]:null,j=arguments.length>6&& void 0!==arguments[6]?arguments[6]:null,k=arguments.length>7&& void 0!==arguments[7]?arguments[7]:null,l=arguments.length>8&& void 0!==arguments[8]?arguments[8]:null,m=arguments.length>9?arguments[9]:void 0,n=arguments.length>10&& void 0!==arguments[10]?arguments[10]:null;if(e&&(null==b?void 0:b.user_id)){var o="".concat(e),p=i({},o,{start_time:a.startTime,end_time:a.endTime,idle_time:a.idleTime,time_counter:a.intervalCounter,question_id:g,project_component_id:j,project_attempt_id:n});f((0,h.VY)({author_id:c,collection_id:d,payload:p,path_id:k,path_author_id:l,workType:m}))}},a.logWidgetsTime=function(b,c,d,e,f,g,j,m){var n=arguments.length>8&& void 0!==arguments[8]?arguments[8]:null,o=arguments.length>9&& void 0!==arguments[9]?arguments[9]:null;if(!e&&d){var p=Object.keys(a.widgetTimes).reduce(function(b,c){return l(k({},b),i({},c,{time_spent:Math.trunc(a.widgetTimes[c].timeCounter),type:a.widgetTimes[c].type}))},{}),q={author_id:b,collection_id:c,page_id:d,is_draft_page:e,interaction_map:JSON.stringify(p),path_id:g,path_author_id:j,workType:m,project_component_id:n,project_attempt_id:o};f((0,h.M1)(q))}},a.dispatchLogTime=function(b,c,d,e,f,g,h,i,j,k,l){var m=arguments.length>11&& void 0!==arguments[11]?arguments[11]:null;a.startTime&&(a.endTime=new Date().getTime(),a.updateIdleTime(),a.logPageTime(b,c,d,e,g,h,k,i,j,l,m),a.logWidgetsTime(c,d,e,f,g,i,j,l,k,m))},a.onPageMount=function(){a.initializeAll(),a.startTime=new Date().getTime(),a.initializeAllIntervals()},a.onPageUnmount=function(b,c,d,e,f,g){var h=arguments.length>6&& void 0!==arguments[6]?arguments[6]:void 0,i=arguments.length>7&& void 0!==arguments[7]?arguments[7]:void 0,j=arguments.length>8&& void 0!==arguments[8]?arguments[8]:void 0,k=arguments.length>9&& void 0!==arguments[9]?arguments[9]:void 0,l=arguments.length>10&& void 0!==arguments[10]?arguments[10]:void 0,m=arguments.length>11&& void 0!==arguments[11]?arguments[11]:void 0;return a.clearAllIntervals(),a.dispatchLogTime(b,c,d,e,f,g,h,j,k,i,l,m),!0},a.pageVisibilityChange=function(b){a.pageVisible=b,b?a.initializeAllIntervals():a.clearAllIntervals()},a.componentVisibilityChange=function(b,c,d){c in a.widgetTimes||(a.widgetTimes[c]={inView:b,type:d,timeCounter:0,intervalVariable:null}),a.widgetTimes[c].inView=b,b?a.widgetTimes[c].intervalVariable||(a.widgetTimes[c].intervalVariable=setInterval(a.widgetIntervalCounterCB(c),1e3)):(clearInterval(a.widgetTimes[c].intervalVariable),a.widgetTimes[c].intervalVariable=null)},a}return o.prototype.render=function(){var b=this;return(0,d.jsx)(g.Z,{onIdle:this.onIdle,onActive:this.onActive,debounce:250,timeout:3e4,ref:function(a){b.idleTimerRef=a},children:(0,d.jsx)(f.Z,{onChange:this.pageVisibilityChange,children:(0,d.jsx)(a,l(k({},this.props),{onPageMount:this.onPageMount,onPageUnmount:this.onPageUnmount,componentVisibilityChange:this.componentVisibilityChange}))})})},o}(e.Component)};b.Z=n}}])
//# sourceMappingURL=77237-b5fbf98d74a6ead7.js.map